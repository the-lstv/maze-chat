<head>

    @manifest {
        title: "Chat";
        accent: "blue";
        style: "flat";
        theme: "dark";
        favicon: /logo.svg;
    }

    @resources {
        js: /js/client.js, /js/ui.js, /js/app.js, https://cdn.jsdelivr.net/npm/vscroll, https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js;
        css: /css/main.css, /css/format.css;

        ls-js: tiny, select, color,tabs, drag, steps, form, resize, tooltips;
        ls-css: base, ls-flat, select, tabs, resize, tooltips;

        fonts: Montserrat, "JetBrains Mono";

        bootstrap-icons;
    }
</head>

<page>
    <main %main message-style="channel">

        <ls-tab %splash loading>

        </ls-tab>


        <ls-tab %error>
            <ls-box ls-accent="red" class="fill">
                <i class="bi-bug-fill"></i>
            </ls-box>
        </ls-tab>


        <ls-tab %decide>
            <img src="/logo.svg" alt="Mazechat logo" draggable="false">
            <div>
                <button onclick="tabs.setActive('login')" class="pill fill">Create account</button> <br>
                <button onclick="tabs.setActive('intro-slideshow')" class="pill">Log-In</button>
            </div>
        </ls-tab>


        <!-- temporary! -->
        <ls-tab %login .intro>

            <img src="https://cdn.extragon.cloud/file/670a4b9db1fd04d0c3daa0de7dc842fa.png?size=250" loading="lazy" alt="Chat bubbles" draggable="false">

            <div style="text-align:center">
                <div style="font-size:2.5em;font-weight:900">
                    MazeChat
                </div>
                
                <h3 style="margin:0">Select how you want to continue:</h3>

                <br><br>

                <ls-box style="display:flex;flex-direction:column">
                    <a style="display: block; width: 100%" ls-accent="deep-orange" href="http://lstv.test/sso?app=11&ref=https%3A%2F%2Fchat.lstv.space%2Fauth-finish&permissions=16.w"><button style="width: 100%">Login with LSTV</button></a>
                </ls-box>

                <br><br>

                <b>(Bare with me till I make a proper login / setup screen.)</b>

                <br><br>

                <div style="width:450px;font-size:.8em;color:var(--elevate-3);text-align:left;"> <li>This product is considered <ls-box .inline .color ls-accent="purple">unreleased</ls-box>. It is pre-alpha and may not work as promised. No warranty or guarantees are made on its functionality, availability, reliability or the retention of your data.</li> <br> <li>Maze is a service provided by <ls-box .inline .color ls-accent="aquamarine">LSTV</ls-box> - same <a href="https://lstv.space/pp">Privacy Policy</a> and <a href="https://lstv.space/tos">Terms of Service</a> apply.</li> </div>
            </div>


            <br> <br>

        </ls-tab>


        <ls-tab %intro-config .intro>
            <!-- <ls-steps>
                <div class="container" style="font-size:small">
                    <ls-step>
                        <h1 style=display:block;text-align:center>Let’s set some basics.</h1>
                        <div id="intro-theme"></div>
                    </ls-step>
                    <ls-step>
                        <h1 style=display:block;text-align:center>Let’s set some basics.</h1>
                        <div id="intro-layout"></div>
                    </ls-step>
                </div>
                <div class="bottom">
                    <button id="c-next-d" style="font-size:2em" class="pill desktop">Next <i class="bi-chevron-right"></i></button>
                    <button id="c-next-m" style="font-size:1.5em" class="circle mobile"><i class="bi-chevron-right"></i></button>
                </div>
            </ls-steps> -->
        </ls-tab>


        <ls-tab %home>
            <div %list>
                <div .list-items>

                </div>
            </div>

            <div %room>
                <div %messageArea></div>
                <div %writingArea>
                    <ls-group join %messageBox>
                        <div role="button" .messageBoxButton>
                            <i .bi-plus-circle-fill></i>
                        </div>

                        <div placeholder="Enter message" %messageContent></div>

                        <div title="Emoji picker" role="button" onclick="app.ui.emojiPicker()" .messageBoxButton>
                            <i .bi-emoji-laughing-fill></i>
                        </div>

                        <div title="Send message" role="button" onclick="app.ui.send()" .messageBoxButton .sendButton>
                            <i .bi-send-fill></i>
                        </div>
                    </ls-group>
                </div>
            </div>
        </ls-tab>

    </main>

    <div %assets hidden style="display: none">
        <div %profilePopup .profile-view hidden>
            <div class="profile-banner">
                <img draggable="false">
                <video loop autoplay muted></video>
            </div>
            <div class="profile-avatar">
                <img draggable="false">
            </div>
            <div class="profile-box">
                <h2 class="profile-name"></h2>
                <div class="profile-bio"></div>
            </div>
        </div>
    </div>

    <style>
        /* Styles that have to be available immediately */
        :root {
            --font: Montserrat;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            width: 100vw;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            margin: 0;
            box-sizing: border-box;
        }
    </style>
</page>